[{"title":"搭建简单的cli工具","url":"/2020/10/16/make-cli/","content":"\n# \n\n<section id=\"nice\" data-tool=\"mdnice编辑器\" data-website=\"https://www.mdnice.com\" style=\"font-size: 16px; color: black; padding: 0 10px; line-height: 1.6; word-spacing: 0px; letter-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;\"><blockquote class=\"multiquote-1\" data-tool=\"mdnice编辑器\" style=\"border: none; display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; background: rgba(0, 0, 0, 0.05); padding-top: 10px; padding-bottom: 10px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left: 2px solid #888; border-right: 2px solid #888; padding-left: 1em; color: #777;\">\n<p style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; text-align: justify; margin: 0px; color: black; line-height: 26px;\">在搭建项目的时候，我们往往会选择一个可靠的脚手架来创建项目，比如vue-cli等。一个可靠的脚手架，往往能帮助我们减少很多的工作量，起到事半功倍的效果。鉴于功能需求的不确定性，通用的脚手架框架有时并不能很好的满足我们的需求，这时，我们就会想办法建立自己的脚手架工具。<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">本文主要介绍搭建一个简单cli脚手架</code>。</p>\n</blockquote>\n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; font-size: 22px; color: #009688; padding-left: 10px; margin: 1em auto; border-left: 3px solid #009688;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">一、脚手架工具涉及的内容</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">脚手架工具其实就是一个自动化创建项目的命令行工具。所以一个脚手架工具应该包括以下部分：</p>\n<ul data-tool=\"mdnice编辑器\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">一个项目模板库，供创建项目时下载</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">用户命令行交互，满足用户不同需求的选择</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">命令行信息提示</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">自动执行命令，如自动安装依赖等</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">检测工具版本，提示更新</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">...</section></li></ul>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">总之，脚手架工具就是在我们创建项目的时候实现自动化，所以，所有能想到的操作都可以放入其中。</p>\n<!-- more -->\n<blockquote class=\"multiquote-1\" data-tool=\"mdnice编辑器\" style=\"border: none; display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; background: rgba(0, 0, 0, 0.05); padding-top: 10px; padding-bottom: 10px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left: 2px solid #888; border-right: 2px solid #888; padding-left: 1em; color: #777;\">\n<p style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; text-align: justify; margin: 0px; color: black; line-height: 26px;\">针对上面所描述的脚手架的内容，我们可以使用一些开源库去实现。</p>\n</blockquote>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">主要会涉及到以下这些</p>\n<blockquote class=\"multiquote-1\" data-tool=\"mdnice编辑器\" style=\"border: none; display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; background: rgba(0, 0, 0, 0.05); padding-top: 10px; padding-bottom: 10px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left: 2px solid #888; border-right: 2px solid #888; padding-left: 1em; color: #777;\">\n<p style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; text-align: justify; margin: 0px; color: black; line-height: 26px;\"><a href=\"https://github.com/tj/commander.js\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #009688; border-bottom: 1px solid #009688;\">commander.js</a></p>\n<p style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; text-align: justify; margin: 0px; color: black; line-height: 26px;\">命令行界面解决方案，可以很方便的去实现命令行中的一些命令。</p>\n<p style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; text-align: justify; margin: 0px; color: black; line-height: 26px;\"><a href=\"https://github.com/SBoudrias/Inquirer.js\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #009688; border-bottom: 1px solid #009688;\">Inquirer.js</a></p>\n<p style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; text-align: justify; margin: 0px; color: black; line-height: 26px;\">一组通用的交互式命令行用户界面，主要用于实现和用户的交互。</p>\n<p style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; text-align: justify; margin: 0px; color: black; line-height: 26px;\"><a href=\"https://github.com/sindresorhus/ora\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #009688; border-bottom: 1px solid #009688;\">ora</a></p>\n<p style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; text-align: justify; margin: 0px; color: black; line-height: 26px;\">命令行界面提示反馈，比如loading等。</p>\n<p style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; text-align: justify; margin: 0px; color: black; line-height: 26px;\"><a href=\"https://github.com/chalk/chalk\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #009688; border-bottom: 1px solid #009688;\">Chalk</a></p>\n<p style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; text-align: justify; margin: 0px; color: black; line-height: 26px;\">终端字符串样式处理正确。</p>\n<p style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; text-align: justify; margin: 0px; color: black; line-height: 26px;\"><a href=\"https://www.npmjs.com/package/download-git-repo\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #009688; border-bottom: 1px solid #009688;\">download-git-repo</a></p>\n<p style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; text-align: justify; margin: 0px; color: black; line-height: 26px;\">从github等仓库下载模板项目。</p>\n</blockquote>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">下面将主要介绍上述库的使用和cli工具的实现。</p>\n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; font-size: 22px; color: #009688; padding-left: 10px; margin: 1em auto; border-left: 3px solid #009688;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">二、搭建脚手架项目</span><span class=\"suffix\"></span></h2>\n<h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 20px; margin: 0.6em auto; padding-left: 10px; border-left: 2px solid #009688;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">（一）新建项目</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<ul data-tool=\"mdnice编辑器\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">新建一个项目文件夹，然后执行命令，</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; background: #fafafa; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\">npm&nbsp;init&nbsp;-y<br></code></pre>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">初始化项目的<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">package.json</code>。</p>\n<ul data-tool=\"mdnice编辑器\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\"><p style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">在项目文件夹下新建<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">index.js</code>。</p>\n</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\"><p style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">在<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">package.json</code>文件中添加以下代码，指定<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">bin</code>入口文件，</p>\n</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; background: #fafafa; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\">...<br>bin:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"xycli\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"./index.js\"</span><br>}<br>...<br></code></pre>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">以后，我们就可以用<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">xycli -</code>来调用cli工具的命令。</p>\n<ul data-tool=\"mdnice编辑器\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">在项目中安装上述依赖</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; background: #fafafa; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\">npm&nbsp;i&nbsp;-S&nbsp;commander&nbsp;inquirer&nbsp;ora&nbsp;download-git-repo&nbsp;chalk<br></code></pre>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">此时，项目搭建基本完成，接下来就是在<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">index.js</code>去实现逻辑。</p>\n<h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 20px; margin: 0.6em auto; padding-left: 10px; border-left: 2px solid #009688;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">（二）cli实现</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">在<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">index.js</code>头部加入</p>\n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; background: #fafafa; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-meta\" style=\"color: #4078f2; line-height: 26px;\">#!/usr/bin/env&nbsp;node</span><br></code></pre>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">用来<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">指定用node执行脚本文件</code></p>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">然后引入上述所涉及到的库</p>\n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; background: #fafafa; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">const</span>&nbsp;program&nbsp;=&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">require</span>(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'commander'</span>);<br><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">const</span>&nbsp;inquirer&nbsp;=&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">require</span>(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'inquirer'</span>);<br><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">const</span>&nbsp;chalk&nbsp;=&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">require</span>(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'chalk'</span>);<br><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">const</span>&nbsp;ora&nbsp;=&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">require</span>(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'ora'</span>);<br><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">const</span>&nbsp;download&nbsp;=&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">require</span>(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'download-git-repo'</span>);<br></code></pre>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">使用<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">commander</code>定义我们的命令</p>\n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; background: #fafafa; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\">program<br>&nbsp;&nbsp;&nbsp;&nbsp;.command(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'init&nbsp;&lt;project&gt;'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;.description(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'Create&nbsp;a&nbsp;new&nbsp;project'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;.action(<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">async</span>&nbsp;(project)&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;})<br></code></pre>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">这里定义了一个<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">init</code>命令，传入参数<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">project</code>，作为项目名称，</p>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">在执行<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">init</code>时，首先需要<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">拉取模板项目代码</code>，使用<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">download-git-repo</code>，采用<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">git clone</code>方式下载项目。</p>\n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; background: #fafafa; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">/**<br>*&nbsp;下载模板项目<br>*&nbsp;<span class=\"hljs-doctag\" style=\"color: #a626a4; line-height: 26px;\">@param&nbsp;<span class=\"hljs-type\" style=\"color: #986801; line-height: 26px;\">{string}</span>&nbsp;<span class=\"hljs-variable\" style=\"color: #986801; line-height: 26px;\">dir</span></span>&nbsp;-&nbsp;创建项目的文件夹<br>*&nbsp;<span class=\"hljs-doctag\" style=\"color: #a626a4; line-height: 26px;\">@param&nbsp;<span class=\"hljs-type\" style=\"color: #986801; line-height: 26px;\">{string}</span>&nbsp;<span class=\"hljs-variable\" style=\"color: #986801; line-height: 26px;\">path</span></span>&nbsp;-&nbsp;模板项目git路径<br>*&nbsp;<span class=\"hljs-doctag\" style=\"color: #a626a4; line-height: 26px;\">@returns&nbsp;<span class=\"hljs-type\" style=\"color: #986801; line-height: 26px;\">{Promise}</span>&nbsp;</span>返回一个promise对象，成功&nbsp;Success/失败&nbsp;Error<br>**/</span><br><span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">function</span>&nbsp;<span class=\"hljs-title\" style=\"color: #4078f2; line-height: 26px;\">downloadTemplate</span>(<span class=\"hljs-params\" style=\"line-height: 26px;\">dir,&nbsp;path</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">return</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">new</span>&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Promise</span>(<span class=\"hljs-function\" style=\"line-height: 26px;\">(<span class=\"hljs-params\" style=\"line-height: 26px;\">resolve</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;download(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">`direct:<span class=\"hljs-subst\" style=\"color: #e45649; line-height: 26px;\">${path}</span>`</span>,&nbsp;dir,&nbsp;{&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">clone</span>:&nbsp;<span class=\"hljs-literal\" style=\"color: #0184bb; line-height: 26px;\">true</span>&nbsp;},&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">function</span>&nbsp;(<span class=\"hljs-params\" style=\"line-height: 26px;\">err</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">if</span>&nbsp;(err)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'Error'</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'Success'</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;})<br>}<br></code></pre>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">拉取完代码后，就要执行<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">npm install</code>，安装项目依赖，这里使用<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">child_process.exec</code>来执行cmd命令。</p>\n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; background: #fafafa; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">const</span>&nbsp;child_process&nbsp;=&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">require</span>(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'child_process'</span>);<br></code></pre>\n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; background: #fafafa; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">/**<br>*&nbsp;安装项目依赖<br>*&nbsp;<span class=\"hljs-doctag\" style=\"color: #a626a4; line-height: 26px;\">@param&nbsp;<span class=\"hljs-type\" style=\"color: #986801; line-height: 26px;\">{string}</span>&nbsp;<span class=\"hljs-variable\" style=\"color: #986801; line-height: 26px;\">dir</span></span>&nbsp;-&nbsp;存放项目的文件夹<br>*&nbsp;<span class=\"hljs-doctag\" style=\"color: #a626a4; line-height: 26px;\">@returns&nbsp;<span class=\"hljs-type\" style=\"color: #986801; line-height: 26px;\">{Promise}</span>&nbsp;</span>返回一个promise对象，成功&nbsp;Success/失败&nbsp;Error<br>**/</span><br><span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">function</span>&nbsp;<span class=\"hljs-title\" style=\"color: #4078f2; line-height: 26px;\">initProject</span>(<span class=\"hljs-params\" style=\"line-height: 26px;\">dir</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">return</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">new</span>&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Promise</span>(<span class=\"hljs-function\" style=\"line-height: 26px;\">(<span class=\"hljs-params\" style=\"line-height: 26px;\">resolve,&nbsp;reject</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child_process.exec(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">`cd&nbsp;<span class=\"hljs-subst\" style=\"color: #e45649; line-height: 26px;\">${dir}</span>&nbsp;&amp;&amp;&nbsp;npm&nbsp;i`</span>,&nbsp;(err)&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">if</span>&nbsp;(err)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'Error'</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'Success'</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;})<br>}<br></code></pre>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">上面就是cli工具基本的流程，整理之后的代码如下</p>\n<h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 20px; margin: 0.6em auto; padding-left: 10px; border-left: 2px solid #009688;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">（三）cli脚手架代码</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; background: #fafafa; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-meta\" style=\"color: #4078f2; line-height: 26px;\">#!/usr/bin/env&nbsp;node</span><br><br><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">const</span>&nbsp;program&nbsp;=&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">require</span>(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'commander'</span>);<br><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">const</span>&nbsp;inquirer&nbsp;=&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">require</span>(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'inquirer'</span>);<br><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">const</span>&nbsp;chalk&nbsp;=&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">require</span>(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'chalk'</span>);<br><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">const</span>&nbsp;ora&nbsp;=&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">require</span>(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'ora'</span>);<br><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">const</span>&nbsp;download&nbsp;=&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">require</span>(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'download-git-repo'</span>);<br><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">const</span>&nbsp;child_process&nbsp;=&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">require</span>(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'child_process'</span>);<br><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">const</span>&nbsp;package&nbsp;=&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">require</span>(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'./package.json'</span>);<br><br>program.version(package.version);<br><br><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">const</span>&nbsp;templateUrl&nbsp;=&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">``</span>;&nbsp;<span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;模板项目git路径</span><br><br>program<br>&nbsp;&nbsp;&nbsp;&nbsp;.command(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'init&nbsp;&lt;project&gt;'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;.description(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'Create&nbsp;a&nbsp;new&nbsp;project'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;.action(<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">async</span>&nbsp;(project)&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">console</span>.log(chalk.green(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">`开始创建项目<span class=\"hljs-subst\" style=\"color: #e45649; line-height: 26px;\">${project}</span>...`</span>));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">let</span>&nbsp;spinner&nbsp;=&nbsp;ora(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'下载模板&nbsp;...'</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spinner.start();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">const</span>&nbsp;resDownload&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">await</span>&nbsp;downloadTemplate(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">`./<span class=\"hljs-subst\" style=\"color: #e45649; line-height: 26px;\">${project}</span>`</span>,&nbsp;templateUrl);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">if</span>&nbsp;(resDownload&nbsp;===&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'Error'</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spinner.stop();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">else</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">if</span>&nbsp;(resDownload&nbsp;===&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'Success'</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spinner.succeed();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">console</span>.log(chalk.green(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'下载模板完成！'</span>));<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spinner&nbsp;=&nbsp;ora(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'npm&nbsp;install&nbsp;...'</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spinner.start();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">const</span>&nbsp;resInit&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">await</span>&nbsp;initProject(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">`./<span class=\"hljs-subst\" style=\"color: #e45649; line-height: 26px;\">${project}</span>`</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">if</span>&nbsp;(resInit&nbsp;===&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'Error'</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spinner.stop();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">else</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">if</span>&nbsp;(resInit&nbsp;===&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'Success'</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spinner.succeed();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">console</span>.log(chalk.green(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'npm&nbsp;install&nbsp;complete'</span>));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">console</span>.log(chalk.green(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">`npm&nbsp;start&nbsp;启动项目`</span>));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;})<br><br><span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">function</span>&nbsp;<span class=\"hljs-title\" style=\"color: #4078f2; line-height: 26px;\">downloadTemplate</span>(<span class=\"hljs-params\" style=\"line-height: 26px;\">dir,&nbsp;path</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">return</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">new</span>&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Promise</span>(<span class=\"hljs-function\" style=\"line-height: 26px;\">(<span class=\"hljs-params\" style=\"line-height: 26px;\">resolve</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;download(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">`direct:<span class=\"hljs-subst\" style=\"color: #e45649; line-height: 26px;\">${path}</span>`</span>,&nbsp;dir,&nbsp;{&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">clone</span>:&nbsp;<span class=\"hljs-literal\" style=\"color: #0184bb; line-height: 26px;\">true</span>&nbsp;},&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">function</span>&nbsp;(<span class=\"hljs-params\" style=\"line-height: 26px;\">err</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">if</span>&nbsp;(err)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'Error'</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'Success'</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;})<br>}<br><br><span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">function</span>&nbsp;<span class=\"hljs-title\" style=\"color: #4078f2; line-height: 26px;\">initProject</span>(<span class=\"hljs-params\" style=\"line-height: 26px;\">dir</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">return</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">new</span>&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Promise</span>(<span class=\"hljs-function\" style=\"line-height: 26px;\">(<span class=\"hljs-params\" style=\"line-height: 26px;\">resolve,&nbsp;reject</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child_process.exec(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">`cd&nbsp;<span class=\"hljs-subst\" style=\"color: #e45649; line-height: 26px;\">${dir}</span>&nbsp;&amp;&amp;&nbsp;npm&nbsp;i`</span>,&nbsp;(err)&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">if</span>&nbsp;(err)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'Error'</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'Success'</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;})<br>}<br><br>program.parse(process.argv);<br><br></code></pre>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">上面实现了一个比较简单的<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">cli</code>工具。</p>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">这边并没有使用<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">inquirer</code>，也没有涉及一些复杂的用户交互操作。具体实际应用可自行扩展。</p>\n<h3 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 20px; margin: 0.6em auto; padding-left: 10px; border-left: 2px solid #009688;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">（四）cli工具使用</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<ul data-tool=\"mdnice编辑器\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">在项目根目录执行<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">npm link</code></section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">执行<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">xycli init test-project</code>，就可以自动创建一个模板项目。</section></li></ul>\n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; font-size: 22px; color: #009688; padding-left: 10px; margin: 1em auto; border-left: 3px solid #009688;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">三、总结</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">以前总以为<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">cli</code>工具很神秘，当我们静下来仔细去探究一下的话，还是有迹可循的。当我们揭开它神秘面纱的时候，就可以自己实现一个定制化的<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">cli</code>工具。</p>\n</section>","tags":["cli","node"],"categories":["Diary"]},{"title":"Github Pages简单搭建个人博客","url":"/2020/10/05/hello-world/","content":"\n\n<section id=\"nice\" data-tool=\"mdnice编辑器\" data-website=\"https://www.mdnice.com\" style=\"font-size: 16px; color: black; padding: 0 10px; line-height: 1.6; word-spacing: 0px; letter-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;\"><h1 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; font-size: 1.8em; color: #009688; margin: 1.2em auto; text-align: center; border-bottom: 1px solid #009688;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\"></span><span class=\"suffix\"></span></h1>\n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; font-size: 22px; color: #009688; padding-left: 10px; margin: 1em auto; border-left: 3px solid #009688;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">一、新建仓库</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">在GitHub上新建仓库，repository name以<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">username.github.io</code>命名。</p>\n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; font-size: 22px; color: #009688; padding-left: 10px; margin: 1em auto; border-left: 3px solid #009688;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">二、使用Hexo搭建个人博客</span><span class=\"suffix\"></span></h2>\n<ul data-tool=\"mdnice编辑器\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">使用 npm 安装 Hexo。</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: block; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\">npm install -g hexo-cli\n<span/></code></pre>\n<ul data-tool=\"mdnice编辑器\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">新建项目</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: block; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\">hexo init &lt;项目文件夹&gt;\n<span/></code></pre>\n<ul data-tool=\"mdnice编辑器\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">进入项目文件夹，执行</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: block; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\">npm install\n<span/></code></pre>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">安装完依赖后，新建项目完成。</p>\n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; font-size: 22px; color: #009688; padding-left: 10px; margin: 1em auto; border-left: 3px solid #009688;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">部署项目</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">执行以下命令，进行打包，</p>\n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: block; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\">npm run build\n<span/></code></pre>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">完成后将<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">public</code>文件夹内的文件提交至第一步所建的仓库中。</p>\n<p data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify;\">然后在<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">GitHub Settings</code>中配置<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #009688;\">GitHub Pages</code>的分支、目录即可。</p>\n<blockquote class=\"multiquote-1\" data-tool=\"mdnice编辑器\" style=\"border: none; display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; background: rgba(0, 0, 0, 0.05); padding-top: 10px; padding-bottom: 10px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left: 2px solid #888; border-right: 2px solid #888; padding-left: 1em; color: #777;\">\n<p style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; text-align: justify; margin: 0px; color: black; line-height: 26px;\">本文只非常简单的介绍了部署个人博客的方法，所有操作基本均为手动，并未涉及到自动化编译等配置，具体步骤可参考<a href=\"https://hexo.io/\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #009688; border-bottom: 1px solid #009688;\">hexo文档</a></p>\n</blockquote>\n<p id=\"nice-suffix-juejin-container\" class=\"nice-suffix-juejin-container\" data-tool=\"mdnice编辑器\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; text-align: justify; margin-top: 20px !important;\">本文使用 <a href=\"https://mdnice.com/?from=juejin\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #009688; border-bottom: 1px solid #009688;\">mdnice</a> 排版</p></section>"}]